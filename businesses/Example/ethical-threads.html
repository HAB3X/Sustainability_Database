<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ethical Threads ‚Äì Sustainability Profile</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <style>
    :root {
      --bg: #121715;
      --card: #1a1f1d;
      --text: #e0f0e0;
      --muted: #93b293;
      --accent: #4ade80;
      --accent-light: #273c2f;
      --border: #2c352f;
    }

    [data-theme='light'] {
      --bg: #f5fef5;
      --card: #ffffff;
      --text: #1a2e1a;
      --muted: #607d60;
      --accent: #3ca974;
      --accent-light: #e0f7eb;
      --border: #d2e3d2;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 2rem 1.25rem;
      max-width: 880px;
      margin-inline: auto;
      line-height: 1.6;
      transition: background 0.3s, color 0.3s;
    }

    h1, h2, h3 {
      font-weight: 600;
      color: var(--text);
    }

    h1 {
      font-size: 1.9rem;
      border-bottom: 3px solid var(--accent);
      padding-bottom: 0.4rem;
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      justify-content: space-between;
    }

    h2 {
      font-size: 1.4rem;
      margin-top: 2rem;
      margin-bottom: 0.6rem;
      border-bottom: 1px solid var(--border);
      padding-bottom: 0.3rem;
    }

    h3 {
      font-size: 1.1rem;
      margin-top: 1.4rem;
      margin-bottom: 0.5rem;
      color: var(--muted);
    }

    p {
      margin: 0.6rem 0 1rem;
    }

    ul {
      margin: 0.6rem 0 1.2rem 1.2rem;
      padding-left: 0;
    }

    ul li {
      margin-bottom: 0.4rem;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.25rem 1.2rem;
      margin-top: 1.5rem;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    .tag {
      display: inline-block;
      background: var(--accent-light);
      color: var(--accent);
      border-radius: 20px;
      font-size: 0.82rem;
      padding: 0.3rem 0.75rem;
      margin: 0.2rem 0.4rem 0.2rem 0;
      text-decoration: none;
    }

    table {
      width: 100%;
      margin-top: 1rem;
      border-collapse: collapse;
      font-size: 0.95rem;
    }

    table th, table td {
      border: 1px solid var(--border);
      padding: 0.5rem 0.75rem;
      text-align: left;
      vertical-align: top;
    }

    table th {
      background-color: var(--accent-light);
      color: var(--accent);
    }

    .footer {
      margin-top: 3rem;
      font-size: 0.9rem;
      color: var(--muted);
      text-align: center;
      border-top: 1px solid var(--border);
      padding-top: 1.25rem;
    }

    a {
      color: var(--accent);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    img.logo {
      max-width: 120px;
      margin-bottom: 0.8rem;
    }

    .controls {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .controls button {
      background: var(--accent);
      color: #000;
      border: none;
      border-radius: 6px;
      padding: 0.4rem 0.8rem;
      cursor: pointer;
      font-size: 0.85rem;
    }

    .controls button:hover {
      background: #74fca0;
    }

    @media (max-width: 600px) {
      body {
        padding: 1rem;
      }

      table th, table td {
        font-size: 0.9rem;
        padding: 0.45rem;
      }

      h1 {
        font-size: 1.6rem;
        flex-direction: column;
        align-items: flex-start;
        gap: 0.8rem;
      }

      .controls {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }
    }
  </style>
</head>
<body data-theme="dark">

  <h1>
    <span><i class="fas fa-leaf"></i> Ethical Threads</span>
    <div class="controls">
      <button onclick="toggleTheme()">üåì Toggle Theme</button>
      <button onclick="window.print()">üñ®Ô∏è Print / PDF</button>
    </div>
  </h1>

  <div class="card">
    <img id="logo" src="/images/ethical-threads-logo.png" alt="Ethical Threads Logo" class="logo" onerror="this.style.display='none'"/>
    <p><strong>Sector:</strong> <span id="sector"></span></p>
    <p><strong>Founded:</strong> <span id="founded"></span></p>
    <p><strong>Employees:</strong> <span id="employees"></span></p>
    <p><strong>Status:</strong> <span id="status"></span></p>
    <p><strong>Location:</strong> <span id="location"></span></p>
    <p><strong>Last Verified:</strong> <span id="last_verified"></span></p>
    <p><strong>Website:</strong> <a id="website" href="#" target="_blank"></a></p>
  </div>

  <div class="card"><h2>Overview</h2><p id="overview"></p></div>
  <div class="card"><h2>Key Practices</h2><ul id="practices"></ul></div>
  <div class="card"><h2>Tags</h2><div id="tags"></div></div>
  <div class="card"><h2>Certifications</h2><ul id="certifications"></ul></div>
  <div class="card"><h2>SDG Alignment</h2><ul id="sdgs"></ul></div>
  <div class="card"><h2>Diversity Report</h2><ul id="diversity"></ul></div>
  <div class="card"><h2>Governance</h2><p><strong>ISS Score:</strong> <span id="iss_score"></span></p><p id="governance_note"></p></div>
  <div class="card">
    <h2>Controversial Product Involvement</h2>
    <table id="involvement-table"><thead><tr><th>Product Area</th><th>Involvement</th></tr></thead><tbody></tbody></table>
  </div>

  <div class="footer">
    &copy; 2025 Sustainability Database Project ¬∑ <a href="https://github.com/hab3x/Sustainability_Database">View on GitHub</a>
  </div>

  <script>
    function toggleTheme() {
      const current = document.body.getAttribute('data-theme');
      document.body.setAttribute('data-theme', current === 'dark' ? 'light' : 'dark');
    }

    fetch('ethical-threads.json')
      .then(res => res.json())
      .then(data => {
        const safe = (v, fallback = "N/A") => v || fallback;

        document.getElementById("sector").textContent = safe(data.sector);
        document.getElementById("founded").textContent = safe(data.founded);
        document.getElementById("employees").textContent = safe(data.employees);
        document.getElementById("status").textContent = safe(data.status);
        document.getElementById("location").textContent = safe(data.location);
        document.getElementById("last_verified").textContent = safe(data.last_verified);
        document.getElementById("website").href = safe(data.website, "#");
        document.getElementById("website").textContent = safe(data.website, "#").replace(/^https?:\/\//, '');
        document.getElementById("overview").textContent = safe(data.overview);

        (data.tags || []).forEach(tag => {
          const span = document.createElement("span");
          span.className = "tag";
          span.textContent = tag;
          document.getElementById("tags").appendChild(span);
        });

        (data.practices || []).forEach(p => {
          const li = document.createElement("li");
          li.textContent = p;
          document.getElementById("practices").appendChild(li);
        });

        (data.certifications || []).forEach(cert => {
          const li = document.createElement("li");
          li.textContent = cert;
          document.getElementById("certifications").appendChild(li);
        });

        (data.sdgs || []).forEach(sdg => {
          const li = document.createElement("li");
          li.textContent = sdg;
          document.getElementById("sdgs").appendChild(li);
        });

        const diversity = data.diversity || {};
        Object.entries(diversity).forEach(([key, val]) => {
          const li = document.createElement("li");
          li.textContent = `${key.replace(/_/g, " ")}: ${val}`;
          document.getElementById("diversity").appendChild(li);
        });

        if (data.corporate_governance) {
          document.getElementById("iss_score").textContent = safe(data.corporate_governance.iss_score);
          document.getElementById("governance_note").textContent = safe(data.corporate_governance.description);
        }

        const tbody = document.querySelector("#involvement-table tbody");
        Object.entries(data.involvement || {}).forEach(([area, value]) => {
          const tr = document.createElement("tr");
          tr.innerHTML = `<td>${area}</td><td>${value}</td>`;
          tbody.appendChild(tr);
        });
      })
      .catch(err => {
        console.error("Failed to load JSON data:", err);
      });
  </script>
</body>
</html>
